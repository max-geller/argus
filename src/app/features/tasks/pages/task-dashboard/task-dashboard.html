<div class="board-header">
  <div class="header-content">
    <h1>Task Board</h1>
    <div class="release-info" *ngIf="taskService.activeRelease() as release">
      <span class="label">Active Release:</span>
      <span class="version">{{ release.version }}</span>
      <button mat-stroked-button 
              color="primary" 
              [disabled]="!canRelease()"
              (click)="completeRelease()">
        <i class="fas fa-rocket"></i>
        Ship Release
      </button>
    </div>
  </div>
  
  <div class="board-actions">
    <button mat-flat-button color="primary" (click)="openAddTask()">
      <i class="fas fa-plus"></i> Add Task
    </button>
  </div>
</div>

<div class="board-container" cdkDropListGroup>
  <!-- To Do Column -->
  <div class="board-column">
    <div class="column-header">
      <h2>To Do <span class="count">{{ taskService.todoTasks().length }}</span></h2>
    </div>
    
    <div class="task-list"
         cdkDropList
         [cdkDropListData]="taskService.todoTasks()"
         (cdkDropListDropped)="drop($event, 'todo')">
      
      <div class="task-card" *ngFor="let task of taskService.todoTasks()" cdkDrag [cdkDragData]="task">
        <div class="task-content">
          {{ task.title }}
        </div>
        <div class="task-actions">
          <button mat-icon-button (click)="deleteTask(task)">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>
      
    </div>
  </div>

  <!-- In Progress Column -->
  <div class="board-column">
    <div class="column-header">
      <h2>In Progress <span class="count">{{ taskService.inProgressTasks().length }}</span></h2>
    </div>
    
    <div class="task-list"
         cdkDropList
         [cdkDropListData]="taskService.inProgressTasks()"
         (cdkDropListDropped)="drop($event, 'in_progress')">
      
      <div class="task-card" *ngFor="let task of taskService.inProgressTasks()" cdkDrag [cdkDragData]="task">
        <div class="task-content">
          {{ task.title }}
        </div>
        <div class="task-actions">
          <button mat-icon-button (click)="deleteTask(task)">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>
      
    </div>
  </div>

  <!-- Done Column -->
  <div class="board-column">
    <div class="column-header">
      <h2>Done <span class="count">{{ taskService.doneTasks().length }}</span></h2>
    </div>
    
    <div class="task-list"
         cdkDropList
         [cdkDropListData]="taskService.doneTasks()"
         (cdkDropListDropped)="drop($event, 'done')">
      
      <div class="task-card done" *ngFor="let task of taskService.doneTasks()" cdkDrag [cdkDragData]="task">
        <div class="task-content">
          {{ task.title }}
        </div>
        <div class="task-actions">
          <button mat-icon-button (click)="deleteTask(task)">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>
      
    </div>
  </div>
</div>

